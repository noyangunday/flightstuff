(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(t,e,a){},20:function(t,e){t.exports="data:image/png;base64,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"},21:function(t,e,a){t.exports=a(54)},27:function(t,e,a){},29:function(t,e,a){},30:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},54:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),r=a(18),s=a.n(r),o=(a(27),a(1)),l=a(2),c=a(4),h=a(3),u=a(5),d=a(7),f=a.n(d),p=(a(29),function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"Tile",id:this.props.selected?"SelectedTile":"Tile",onClick:function(){t.props.selectCb()}},this.props.layout())}}]),e}(n.a.Component)),m=(a(30),function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return n.a.createElement("svg",{className:"Loader",version:"1.1",id:"L7",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},n.a.createElement("path",{fill:"#fff",d:"M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3\r c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z"},n.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),n.a.createElement("path",{fill:"#fff",d:"M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7\r c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z"},n.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"-360 50 50",repeatCount:"indefinite"})),n.a.createElement("path",{fill:"#fff",d:"M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5\r L82,35.7z"},n.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))}}]),e}(n.a.Component)),v=function(){function t(){Object(o.a)(this,t)}return Object(l.a)(t,null,[{key:"getProperty",value:function(t,e){for(var a=e.split("."),i=t;a.length>1;)i=i[a.shift()];return i[a.shift()]}}]),t}(),b=a(19),g=a.n(b),A=(a(48),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(c.a)(this,Object(h.a)(e).call(this,t))).state={fetchStatus:0,offset:0,data:[],filter:""},a}return Object(u.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var t=this,e=10;void 0!==this.state.total&&(e=Math.min(this.state.total-this.state.offset,10)),e>0&&1!==this.state.fetchStatus&&(this.setState({fetchStatus:1}),g.a.get([this.props.tile.model.endpoint,"?offset=",this.state.offset,"&limit=",e].join("")).then(function(e){t.setState({data:t.state.data.concat(v.getProperty(e,t.props.tile.model.dataPath)),fetchStatus:0,offset:t.state.offset+10,total:v.getProperty(e,t.props.tile.model.sizePath)})}).catch(function(e){t.setState({fetchStatus:2,errorCode:e})}))}},{key:"onTileSelected",value:function(t){this.props.selectCb&&this.props.selectCb(t)}},{key:"renderTiles",value:function(){var t=this,e=this.state.data;return this.state.filter.length>0&&(e=e.filter(function(e){return e[t.props.tile.model.filter].includes(t.state.filter)})),e.map(function(e,a){var i={};return t.props.tile.model.proto.forEach(function(t){i[t]=e[t]}),n.a.createElement(p,Object.assign({selected:t.props.selectedTile&&t.props.selectedTile.ident===e.ident,key:["Tile",t.props.tile.model.id,a].join("_"),selectCb:t.onTileSelected.bind(t,e)},i,{layout:t.props.tile.layout}))})}},{key:"renderLoadMore",value:function(){var t=this;if((this.state.total&&this.state.total-this.state.offset>0||void 0===this.state.total)&&0===this.state.fetchStatus)return n.a.createElement("div",{className:"LoadMoreButton",onClick:function(){t.fetch()}}," Load More ")}},{key:"renderFilter",value:function(){var t=this,e=this.props.tile.model.filter;if(e){var a=["PanelFilter",this.props.tile.id,e].join("_");return n.a.createElement("div",null," ",n.a.createElement("input",{onChange:function(){t.setState({filter:document.getElementById(a).value})},id:a,key:a,className:"PanelFilter",type:"text",placeholder:["Filter by",e].join(" ")})," ")}}},{key:"render",value:function(){return n.a.createElement("div",{className:"Panel",style:{float:this.props.alignment}},n.a.createElement("div",{className:"PanelHeader"},n.a.createElement("div",null,n.a.createElement("img",{className:"PanelHeaderLogo",src:this.props.tile.logoUrl,alt:""})),n.a.createElement("div",null,[this.props.tile.name,this.state.total?[" ("+this.state.total+")"].join(""):""].join(""))),this.renderFilter(),this.renderTiles(),1===this.state.fetchStatus&&n.a.createElement(m,null),this.renderLoadMore())}}]),e}(n.a.Component)),y=function t(){Object(o.a)(this,t)};y.config={id:"Flight",name:"Flights",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/White_Globe_Icon.png/1200px-White_Globe_Icon.png",model:{endpoint:"https://infinite-dawn-93085.herokuapp.com/flights",dataPath:"data.data",sizePath:"data.pagination.total",proto:["id","readable_departure","readable_arrival","origin","destination"],filter:"origin"},layout:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"FlightName"}," ",this.id," "),n.a.createElement("div",{className:"FlightDetails"},n.a.createElement("div",{className:"FlightFrom"}," ",this.origin,n.a.createElement("br",null),this.readable_departure," "),n.a.createElement("div",{className:"FlightTo"}," ",this.destination,n.a.createElement("br",null),this.readable_arrival," ")))}};var w=y,E=function t(){Object(o.a)(this,t)};E.config={id:"Aircraft",name:"Aircrafts",logoUrl:"https://domotexusa.com/wp-content/uploads/2017/12/DOMOTEX-USA19-icon-plane-white.png",model:{endpoint:"https://infinite-dawn-93085.herokuapp.com/aircrafts",dataPath:"data.data",sizePath:"data.pagination.total",proto:["ident","type"]},layout:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"AircraftName"}," ",[this.ident," (",this.type,")"].join("")," "))}};var O=E,S=(a(49),function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"DatePicker"},n.a.createElement("div",{className:"NavButton",id:this.props.canGoBack?"NavButtonLeft":"NavButtonLeftDisabled",onClick:function(){t.props.canGoBack&&t.props.dateChangeCb(-1)}}," ","<"," "),this.props.date,n.a.createElement("div",{className:"NavButton",id:"NavButtonRight",onClick:function(){t.props.dateChangeCb(1)}}," ",">"," "))}}]),e}(n.a.Component)),N=(a(50),function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"calculateUtilisation",value:function(){return Math.trunc(this.props.rotation.reduce(function(t,e){return t+(e.arrivaltime-e.departuretime)},0)/86400*100)}},{key:"render",value:function(){var t=this.props.aircraft?["Rotation for ",this.props.aircraft.ident].join(""):"No Aircraft Selected.",e=this.props.aircraft?["Type: ",this.props.aircraft.type," (",this.props.aircraft.economySeats," seats) | Base Airport: ",this.props.aircraft.base].join(""):"",a=this.props.aircraft?["Current utilisation: ",this.calculateUtilisation(),"%"].join(""):"";return n.a.createElement("div",{className:"AircraftDetails"},t," ",n.a.createElement("br",null)," ",e," ",n.a.createElement("br",null)," ",a)}}]),e}(n.a.Component)),j=(a(51),a(17),function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"RotationTile",onClick:function(){t.props.selectCb&&t.props.selectCb()}},n.a.createElement("div",{className:"RotationFlightName"}," ",["Flight:",this.props.flight.id].join(" ")," "),n.a.createElement("div",{className:"RotationFlightDetails"},n.a.createElement("div",{className:"FlightFrom"}," ",this.props.flight.origin,n.a.createElement("br",null),this.props.flight.readable_departure," "),n.a.createElement("div",{className:"FlightTo"}," ",this.props.flight.destination,n.a.createElement("br",null),this.props.flight.readable_arrival," ")))}}]),e}(n.a.Component)),k=(a(52),a(53),a(20)),B=a.n(k),C=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(c.a)(this,Object(h.a)(e).call(this,t))).data={},a.state={date:f()().startOf("day"),rotation:[],toast:""},a}return Object(u.a)(e,t),Object(l.a)(e,[{key:"currentDateString",value:function(){var t=f()().endOf("day"),e=f()().add(1,"day").endOf("day");return this.state.date<t?"Today":this.state.date<e?"Tomorrow":this.state.date.format("DD MMM YYYY")}},{key:"switchRotation",value:function(t){var e=t.valueOf().toString(),a=this.state.currentAircraft&&this.state.currentAircraft.ident;return a&&this.data[e]&&this.data[e][a]?this.data[e][a]:[]}},{key:"validateAdd",value:function(t){if(0===this.state.rotation.length)return!0;var e=this.state.rotation[this.state.rotation.length-1].destination,a=this.state.rotation[this.state.rotation.length-1].arrivaltime;return e!==t.origin?(this.showToast(["New flight's origin should be ",e,"."].join("")),!1):a+1200>t.departuretime?(this.showToast("The next flight should be at least 20 minutes after the last one."),!1):!(t.arrivaltime<t.departuretime)||(this.showToast("Aircrafts must land by midnight."),!1)}},{key:"showToast",value:function(t){var e=this;this.setState({toast:t}),setTimeout(function(){e.setState({toast:""})},3e3)}},{key:"onDateChanged",value:function(t){var e=this.state.date.add(t,"day"),a=this.switchRotation(e);this.setState({currentDate:e,rotation:a}),this.updateUtilisationBar(a)}},{key:"onAircraftSelected",value:function(t){var e=this.switchRotation(this.state.date);this.setState({currentAircraft:t,rotation:e}),this.updateUtilisationBar(e)}},{key:"onFlightSelected",value:function(t){if(this.state.currentAircraft){if(this.validateAdd(t)){var e=this.state.date.valueOf().toString(),a=this.state.currentAircraft&&this.state.currentAircraft.ident;!this.data[e]&&(this.data[e]={}),!this.data[e][a]&&(this.data[e][a]=[]),this.data[e][a].push(t),this.setState({rotation:this.data[e][a]}),this.showToast("Flight added to rotation."),this.updateUtilisationBar(this.data[e][a])}}else this.showToast("Select an aircraft first.")}},{key:"onDeleteFlight",value:function(t){var e=this.switchRotation(this.state.date);e.length>0&&e[e.length-1].id===t.id?(e.pop(),this.setState({rotation:e}),this.updateUtilisationBar(e),this.showToast("Flight removed.")):this.showToast("Removing this flight will lead to an empty flight to the next airport; try removing trailing flights first.")}},{key:"updateUtilisationBar",value:function(t){var e=this.refs.canvas;if(e&&e.getContext){var a=e.getContext("2d");a.fillStyle="#101010",a.fillRect(0,0,e.width,e.height),t.forEach(function(t){var i=t.departuretime/86400*e.width,n=t.arrivaltime/86400*e.width,r=(t.arrivaltime+1200)/86400*e.width;a.fillStyle="green",a.fillRect(i,0,n-i,e.height),a.fillStyle="purple",a.fillRect(n,0,r-n,e.height)})}}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"TopBar"},n.a.createElement("img",{className:"Logo",src:B.a,alt:""}),n.a.createElement("div",{className:"Toast"},this.state.toast)),n.a.createElement("div",{className:"Main"},n.a.createElement(A,{tile:w.config,alignment:"right",key:"FlightPanel",selectCb:this.onFlightSelected.bind(this)}),n.a.createElement(A,{tile:O.config,alignment:"left",key:"AircraftsPanel",selectCb:this.onAircraftSelected.bind(this),selectedTile:this.state.currentAircraft}),n.a.createElement("div",{className:"Editor"},n.a.createElement(S,{date:this.currentDateString(),dateChangeCb:this.onDateChanged.bind(this),canGoBack:this.state.date>f()().startOf("day")}),n.a.createElement(N,{aircraft:this.state.currentAircraft,rotation:this.state.rotation}),n.a.createElement("canvas",{className:"UtilisationBar",ref:"canvas"}),this.state.rotation.map(function(e,a){return n.a.createElement(j,{flight:e,key:["RotationTile",a].join(),selectCb:t.onDeleteFlight.bind(t,e)})}))))}}]),e}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.6edd606d.chunk.js.map